(()=>{var e={866:()=>{},694:()=>{},947:()=>{},547:()=>{}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=n(694),t=n(947),r=n(547),o=n(866);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var u,c=document.querySelector(".places__list"),l=document.querySelectorAll(".popup__close"),i=document.querySelectorAll(".popup"),d=document.querySelector(".popup_type_image"),p=document.querySelector(".popup__image"),f=document.querySelector(".popup__caption"),s=document.querySelector(".popup__input_type_url"),m=document.querySelector(".popup_type_new-card"),v=document.querySelector(".popup_type_new-avatar"),y=document.querySelector(".popup_type_edit"),_=document.querySelector(".profile__title"),b=document.querySelector(".profile__description"),g=document.querySelector(".profile__image"),h=document.querySelector(".profile__edit-button"),S=document.forms["edit-profile"],q=S.elements.name,C=S.elements.description,x=document.querySelector(".profile__add-button"),k=document.forms["new-place"],E=document.querySelector(".popup__input_type_card-name");function M(e){p.src=e.link,p.alt=e.name,f.textContent=e.name,(0,t.openModal)(d)}function L(e){document.querySelector(".popup__button").textContent=e?"Сохранение...":"Сохранить"}(0,o.getUserData)().then((function(e){_.textContent=e.name,b.textContent=e.about,g.src=e.avatar,e._id})).catch((function(e){return console.log(e)})),Promise.all([(0,o.getUserData)(),(0,o.initialCardsRender)()]).then((function(t){var n,r,o=(r=2,function(e){if(Array.isArray(e))return e}(n=t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,u,c=[],l=!0,i=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){i=!0,o=e}finally{try{if(!l&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(i)throw o}}return c}}(n,r)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=o[0],i=o[1];_.textContent=l.name,b.textContent=l.about,g.style.backgroundImage="url('".concat(l.avatar,"')"),u=l._id,i.forEach((function(t){var n=(0,e.createCard)(t,e.deleteCard,e.isLiked,M,u);c.append(n)}))})).catch((function(e){console.log(e)})),h.addEventListener("click",(function(e){(0,r.clearValidation)(S),e.preventDefault(),q.value=_.textContent,C.value=b.textContent,(0,t.openModal)(y)})),S.addEventListener("submit",(function(e){e.preventDefault(),L(!0);var n=q.value,r=C.value;(0,o.editProfile)(n,r).then((function(e){_.textContent=e.name,b.textContent=e.about})).catch((function(e){return console.log(e)})).finally((function(){return L(!1)})),(0,t.closeModal)(y)})),x.addEventListener("click",(function(e){e.preventDefault,(0,r.clearValidation)(k),E.value="",s.value="",(0,t.openModal)(m)})),k.addEventListener("submit",(function(n){n.preventDefault(),L(!0);var r=E.value,a=s.value;(0,o.addNewCard)(r,a).then((function(t){var n={name:t.name,link:t.link},r=(0,e.createCard)(n,e.deleteCard,e.isLiked,M,u);c.prepend(r)})).catch((function(e){return console.log(e)})).finally((function(){return L(!1)})),(0,t.closeModal)(m),n.target.reset()})),g.addEventListener("click",(function(e){e.preventDefault(),(0,t.openModal)(v)})),v.addEventListener("submit",(function(e){e.preventDefault(),L(!0);var n=document.querySelector(".popup__input_type_avatar").value;(0,o.updateUserAvatar)(n).then((function(e){g.style.backgroundImage="url(".concat(e.avatar,")")})).catch((function(e){return console.log(e)})).finally((function(){return L(!1)})),(0,t.closeModal)(v)})),l.forEach((function(e){e.addEventListener("click",(function(){var n=e.closest(".popup");(0,t.closeModal)(n)}))})),i.forEach((function(e){e.addEventListener("click",(function(e){e.target.matches(".popup__content")||(0,t.closeModal)(e.target)}))})),(0,r.enableValidation)()})()})();